version: '3.0'

expectations:
  population_size: 30000

actions:

### study cohort ###
  generate_study_population:
    run: cohortextractor:latest generate_cohort --study-definition study_definition
    outputs:
      highly_sensitive:
        cohort: output/input.csv

  generate_study_population_ae:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_ae --index-date-range "2019-01-01 to 2023-03-31 by month" --skip-existing --output-dir=output/measures --output-format=csv.gz
    outputs:
      highly_sensitive:
        cohort: output/measures/input_ae_*.csv.gz

  generate_measures_ae:
    run: cohortextractor:latest generate_measures --study-definition study_definition_ae --skip-existing --output-dir=output/measures
    needs: [generate_study_population_ae]
    outputs:
      moderately_sensitive:
        measure_csv: output/measures/measure_*.csv

  ae_rate_table:  
    run: r:latest analysis/figure/ae_rate.R
    needs: [generate_measures_ae]
    outputs:
      moderately_sensitive:
        table1: output/ae_rate_table.csv
        table2: output/ae_rate_forplot.csv
        plot1: output/figure_ae_rate.jpeg

  infection_table:  
    run: r:latest analysis/figure/infection_table.R
    needs: [generate_measures_ae]
    outputs:
      moderately_sensitive:
        table1: output/infection_table.csv
        table2: output/infection_forplot.csv
        plot1: output/figure_infection.jpeg

  generate_study_population_2ae:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_2ae --index-date-range "2019-01-01 to 2023-03-31 by month" --skip-existing --output-dir=output/measures --output-format=csv.gz
    outputs:
      highly_sensitive:
        cohort: output/measures/input_2ae_*.csv.gz

  generate_measures_2ae:
    run: cohortextractor:latest generate_measures --study-definition study_definition_2ae --skip-existing --output-dir=output/measures
    needs: [generate_study_population_2ae]
    outputs:
      moderately_sensitive:
        measure_csv: output/measures/measure_2ae_*.csv

  ae_rate_42days_table:  
    run: r:latest analysis/figure/ae_rate_42days.R
    needs: [generate_measures_2ae]
    outputs:
      moderately_sensitive:
        table1: output/ae_rate_42days_table.csv
        table2: output/ae_rate_42days_forplot.csv
        plot1: output/figure_ae_42days_rate.jpeg

  ae_rate_42days_nocovid_table:  
    run: r:latest analysis/figure/ae_rate_42days_nocovid.R
    needs: [generate_measures_2ae]
    outputs:
      moderately_sensitive:
        table1: output/ae_rate_42days_nocovid_table.csv
        table2: output/ae_rate_42days_nocovid_forplot.csv
        plot1: output/figure_ae_42days_nocovid_rate.jpeg

###########################################################################
##########                      case control                      #########
###########################################################################
### study cohort ###
  generate_study_population_case:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case
    outputs:
      highly_sensitive:
        cohort: output/input_case.csv
### 2019-1 ###
  generate_study_population_control_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1
    outputs:
      highly_sensitive:
        cohort: output/input_control_1.csv
### 2019-2 ###
  generate_study_population_control_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2
    outputs:
      highly_sensitive:
        cohort: output/input_control_2.csv
### 2020-1 ###
  generate_study_population_control_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3
    outputs:
      highly_sensitive:
        cohort: output/input_control_3.csv
### 2020-2 ###
  generate_study_population_control_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4
    outputs:
      highly_sensitive:
        cohort: output/input_control_4.csv
### 2021-1 ###
  generate_study_population_control_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5
    outputs:
      highly_sensitive:
        cohort: output/input_control_5.csv
### 2021-2 ###
  generate_study_population_control_6:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6
    outputs:
      highly_sensitive:
        cohort: output/input_control_6.csv
### 2022-1 ###
  generate_study_population_control_7:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7
    outputs:
      highly_sensitive:
        cohort: output/input_control_7.csv
### 2022-2 ###
  generate_study_population_control_8:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8
    outputs:
      highly_sensitive:
        cohort: output/input_control_8.csv
### 2023-1 ###
  generate_study_population_control_9:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9
    outputs:
      highly_sensitive:
        cohort: output/input_control_9.csv

  process_1:  
    run: r:latest analysis/casecontrol/process_1.R
    needs: [generate_study_population_case,generate_study_population_control_1,generate_study_population_control_2,
    generate_study_population_control_3,generate_study_population_control_4,generate_study_population_control_5,
    generate_study_population_control_6,generate_study_population_control_7,generate_study_population_control_8,
    generate_study_population_control_9]
    outputs:
      highly_sensitive:
        table1: output/case_1_uti.csv
        table2: output/case_1_lrti.csv
        table3: output/case_1_urti.csv
        table4: output/case_1_sinusitis.csv
        table5: output/case_1_ot_externa.csv
        table6: output/case_1_ot_media.csv
        table7: output/case_1_pneumonia.csv
        table8:  output/case_2_uti.csv
        table9:  output/case_2_lrti.csv
        table10: output/case_2_urti.csv
        table11: output/case_2_sinusitis.csv
        table12: output/case_2_ot_externa.csv
        table13: output/case_2_ot_media.csv
        table14: output/case_2_pneumonia.csv
        table15: output/case_3_uti.csv
        table16: output/case_3_lrti.csv
        table17: output/case_3_urti.csv
        table18: output/case_3_sinusitis.csv
        table19: output/case_3_ot_externa.csv
        table20: output/case_3_ot_media.csv
        table21: output/case_3_pneumonia.csv
        table22: output/case_4_uti.csv
        table23: output/case_4_lrti.csv
        table24: output/case_4_urti.csv
        table25: output/case_4_sinusitis.csv
        table26: output/case_4_ot_externa.csv
        table27: output/case_4_ot_media.csv
        table28: output/case_4_pneumonia.csv
        table29: output/case_5_uti.csv
        table30: output/case_5_lrti.csv
        table31: output/case_5_urti.csv
        table32: output/case_5_sinusitis.csv
        table33: output/case_5_ot_externa.csv
        table34: output/case_5_ot_media.csv
        table35: output/case_5_pneumonia.csv
        table36: output/case_6_uti.csv
        table37: output/case_6_lrti.csv
        table38: output/case_6_urti.csv
        table39: output/case_6_sinusitis.csv
        table40: output/case_6_ot_externa.csv
        table41: output/case_6_ot_media.csv
        table42: output/case_6_pneumonia.csv
        table43: output/case_7_uti.csv
        table44: output/case_7_lrti.csv
        table45: output/case_7_urti.csv
        table46: output/case_7_sinusitis.csv
        table47: output/case_7_ot_externa.csv
        table48: output/case_7_ot_media.csv
        table49: output/case_7_pneumonia.csv
        table50: output/case_8_uti.csv
        table51: output/case_8_lrti.csv
        table52: output/case_8_urti.csv
        table53: output/case_8_sinusitis.csv
        table54: output/case_8_ot_externa.csv
        table55: output/case_8_ot_media.csv
        table56: output/case_8_pneumonia.csv
        table57: output/case_9_uti.csv
        table58: output/case_9_lrti.csv
        table59: output/case_9_urti.csv
        table60: output/case_9_sinusitis.csv
        table61: output/case_9_ot_externa.csv
        table62: output/case_9_ot_media.csv
        table63: output/case_9_pneumonia.csv
        table64: output/control_1_uti.csv
        table65: output/control_1_lrti.csv
        table66: output/control_1_urti.csv
        table67: output/control_1_sinusitis.csv
        table68: output/control_1_ot_externa.csv
        table69: output/control_1_ot_media.csv
        table70: output/control_1_pneumonia.csv
        table71: output/control_2_uti.csv
        table72: output/control_2_lrti.csv
        table73: output/control_2_urti.csv
        table74: output/control_2_sinusitis.csv
        table75: output/control_2_ot_externa.csv
        table76: output/control_2_ot_media.csv
        table77: output/control_2_pneumonia.csv
        table78:  output/control_3_uti.csv
        table79:  output/control_3_lrti.csv
        table80:  output/control_3_urti.csv
        table81:  output/control_3_sinusitis.csv
        table82:  output/control_3_ot_externa.csv
        table83:  output/control_3_ot_media.csv
        table84:  output/control_3_pneumonia.csv
        table85:  output/control_4_uti.csv
        table86:  output/control_4_lrti.csv
        table87:  output/control_4_urti.csv
        table88:  output/control_4_sinusitis.csv
        table89:  output/control_4_ot_externa.csv
        table90:  output/control_4_ot_media.csv
        table91:  output/control_4_pneumonia.csv
        table92:  output/control_5_uti.csv
        table93:  output/control_5_lrti.csv
        table94:  output/control_5_urti.csv
        table95:  output/control_5_sinusitis.csv
        table96:  output/control_5_ot_externa.csv
        table97:  output/control_5_ot_media.csv
        table98:  output/control_5_pneumonia.csv
        table99:  output/control_6_uti.csv
        table100: output/control_6_lrti.csv
        table101: output/control_6_urti.csv
        table102: output/control_6_sinusitis.csv
        table103: output/control_6_ot_externa.csv
        table104: output/control_6_ot_media.csv
        table105: output/control_6_pneumonia.csv
        table106: output/control_7_uti.csv
        table107: output/control_7_lrti.csv
        table108: output/control_7_urti.csv
        table109: output/control_7_sinusitis.csv
        table110: output/control_7_ot_externa.csv
        table111: output/control_7_ot_media.csv
        table112: output/control_7_pneumonia.csv
        table113: output/control_8_uti.csv
        table114: output/control_8_lrti.csv
        table115: output/control_8_urti.csv
        table116: output/control_8_sinusitis.csv
        table117: output/control_8_ot_externa.csv
        table118: output/control_8_ot_media.csv
        table119: output/control_8_pneumonia.csv
        table120: output/control_9_uti.csv
        table121: output/control_9_lrti.csv
        table122: output/control_9_urti.csv
        table123: output/control_9_sinusitis.csv
        table124: output/control_9_ot_externa.csv
        table125: output/control_9_ot_media.csv
        table126: output/control_9_pneumonia.csv

  matching_1:
    run: python:latest python analysis/matching_1.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table1: output/matched_cases_1_uti.csv
        table2: output/matched_matches_1_uti.csv
        table3: output/matched_combined_1_uti.csv
        table4: output/matched_cases_1_lrti.csv
        table5: output/matched_matches_1_lrti.csv
        table6: output/matched_combined_1_lrti.csv
        table7: output/matched_cases_1_urti.csv
        table8: output/matched_matches_1_urti.csv
        table9: output/matched_combined_1_urti.csv
        table10: output/matched_cases_1_sinusitis.csv
        table11: output/matched_matches_1_sinusitis.csv
        table12: output/matched_combined_1_sinusitis.csv
        table13: output/matched_cases_1_ot_externa.csv
        table14: output/matched_matches_1_ot_externa.csv
        table15: output/matched_combined_1_ot_externa.csv
        table16: output/matched_cases_1_ot_media.csv
        table17: output/matched_matches_1_ot_media.csv
        table18: output/matched_combined_1_ot_media.csv
        table19: output/matched_cases_1_pneumonia.csv
        table20: output/matched_matches_1_pneumonia.csv
        table21: output/matched_combined_1_pneumonia.csv
      moderately_sensitive: 
        report1: output/matching_report_1_uti.txt
        report2: output/matching_report_1_lrti.txt
        report3: output/matching_report_1_urti.txt
        report4: output/matching_report_1_sinusitis.txt
        report5: output/matching_report_1_ot_externa.txt
        report6: output/matching_report_1_ot_media.txt
        report7: output/matching_report_1_pneumonia.txt

  matching_2:
    run: python:latest python analysis/matching_2.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_2_uti.csv
        table23: output/matched_matches_2_uti.csv
        table24: output/matched_combined_2_uti.csv
        table25: output/matched_cases_2_lrti.csv
        table26: output/matched_matches_2_lrti.csv
        table27: output/matched_combined_2_lrti.csv
        table28: output/matched_cases_2_urti.csv
        table29: output/matched_matches_2_urti.csv
        table30: output/matched_combined_2_urti.csv
        table31: output/matched_cases_2_sinusitis.csv
        table32: output/matched_matches_2_sinusitis.csv
        table33: output/matched_combined_2_sinusitis.csv
        table34: output/matched_cases_2_ot_externa.csv
        table35: output/matched_matches_2_ot_externa.csv
        table36: output/matched_combined_2_ot_externa.csv
        table37: output/matched_cases_2_ot_media.csv
        table38: output/matched_matches_2_ot_media.csv
        table39: output/matched_combined_2_ot_media.csv
        table40: output/matched_cases_2_pneumonia.csv
        table41: output/matched_matches_2_pneumonia.csv
        table42: output/matched_combined_2_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_2_uti.txt
        report9: output/matching_report_2_lrti.txt
        report10: output/matching_report_2_urti.txt
        report11: output/matching_report_2_sinusitis.txt
        report12: output/matching_report_2_ot_externa.txt
        report13: output/matching_report_2_ot_media.txt
        report14: output/matching_report_2_pneumonia.txt

  matching_3:
    run: python:latest python analysis/matching_3.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_3_uti.csv
        table23: output/matched_matches_3_uti.csv
        table24: output/matched_combined_3_uti.csv
        table25: output/matched_cases_3_lrti.csv
        table26: output/matched_matches_3_lrti.csv
        table27: output/matched_combined_3_lrti.csv
        table28: output/matched_cases_3_urti.csv
        table29: output/matched_matches_3_urti.csv
        table30: output/matched_combined_3_urti.csv
        table31: output/matched_cases_3_sinusitis.csv
        table32: output/matched_matches_3_sinusitis.csv
        table33: output/matched_combined_3_sinusitis.csv
        table34: output/matched_cases_3_ot_externa.csv
        table35: output/matched_matches_3_ot_externa.csv
        table36: output/matched_combined_3_ot_externa.csv
        table37: output/matched_cases_3_ot_media.csv
        table38: output/matched_matches_3_ot_media.csv
        table39: output/matched_combined_3_ot_media.csv
        table40: output/matched_cases_3_pneumonia.csv
        table41: output/matched_matches_3_pneumonia.csv
        table42: output/matched_combined_3_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_3_uti.txt
        report9: output/matching_report_3_lrti.txt
        report10: output/matching_report_3_urti.txt
        report11: output/matching_report_3_sinusitis.txt
        report12: output/matching_report_3_ot_externa.txt
        report13: output/matching_report_3_ot_media.txt
        report14: output/matching_report_3_pneumonia.txt

  matching_4:
    run: python:latest python analysis/matching_4.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_4_uti.csv
        table23: output/matched_matches_4_uti.csv
        table24: output/matched_combined_4_uti.csv
        table25: output/matched_cases_4_lrti.csv
        table26: output/matched_matches_4_lrti.csv
        table27: output/matched_combined_4_lrti.csv
        table28: output/matched_cases_4_urti.csv
        table29: output/matched_matches_4_urti.csv
        table30: output/matched_combined_4_urti.csv
        table31: output/matched_cases_4_sinusitis.csv
        table32: output/matched_matches_4_sinusitis.csv
        table33: output/matched_combined_4_sinusitis.csv
        table34: output/matched_cases_4_ot_externa.csv
        table35: output/matched_matches_4_ot_externa.csv
        table36: output/matched_combined_4_ot_externa.csv
        table37: output/matched_cases_4_ot_media.csv
        table38: output/matched_matches_4_ot_media.csv
        table39: output/matched_combined_4_ot_media.csv
        table40: output/matched_cases_4_pneumonia.csv
        table41: output/matched_matches_4_pneumonia.csv
        table42: output/matched_combined_4_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_4_uti.txt
        report9: output/matching_report_4_lrti.txt
        report10: output/matching_report_4_urti.txt
        report11: output/matching_report_4_sinusitis.txt
        report12: output/matching_report_4_ot_externa.txt
        report13: output/matching_report_4_ot_media.txt
        report14: output/matching_report_4_pneumonia.txt

  matching_5:
    run: python:latest python analysis/matching_5.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_5_uti.csv
        table23: output/matched_matches_5_uti.csv
        table24: output/matched_combined_5_uti.csv
        table25: output/matched_cases_5_lrti.csv
        table26: output/matched_matches_5_lrti.csv
        table27: output/matched_combined_5_lrti.csv
        table28: output/matched_cases_5_urti.csv
        table29: output/matched_matches_5_urti.csv
        table30: output/matched_combined_5_urti.csv
        table31: output/matched_cases_5_sinusitis.csv
        table32: output/matched_matches_5_sinusitis.csv
        table33: output/matched_combined_5_sinusitis.csv
        table34: output/matched_cases_5_ot_externa.csv
        table35: output/matched_matches_5_ot_externa.csv
        table36: output/matched_combined_5_ot_externa.csv
        table37: output/matched_cases_5_ot_media.csv
        table38: output/matched_matches_5_ot_media.csv
        table39: output/matched_combined_5_ot_media.csv
        table40: output/matched_cases_5_pneumonia.csv
        table41: output/matched_matches_5_pneumonia.csv
        table42: output/matched_combined_5_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_5_uti.txt
        report9: output/matching_report_5_lrti.txt
        report10: output/matching_report_5_urti.txt
        report11: output/matching_report_5_sinusitis.txt
        report12: output/matching_report_5_ot_externa.txt
        report13: output/matching_report_5_ot_media.txt
        report14: output/matching_report_5_pneumonia.txt

  matching_6:
    run: python:latest python analysis/matching_6.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_6_uti.csv
        table23: output/matched_matches_6_uti.csv
        table24: output/matched_combined_6_uti.csv
        table25: output/matched_cases_6_lrti.csv
        table26: output/matched_matches_6_lrti.csv
        table27: output/matched_combined_6_lrti.csv
        table28: output/matched_cases_6_urti.csv
        table29: output/matched_matches_6_urti.csv
        table30: output/matched_combined_6_urti.csv
        table31: output/matched_cases_6_sinusitis.csv
        table32: output/matched_matches_6_sinusitis.csv
        table33: output/matched_combined_6_sinusitis.csv
        table34: output/matched_cases_6_ot_externa.csv
        table35: output/matched_matches_6_ot_externa.csv
        table36: output/matched_combined_6_ot_externa.csv
        table37: output/matched_cases_6_ot_media.csv
        table38: output/matched_matches_6_ot_media.csv
        table39: output/matched_combined_6_ot_media.csv
        table40: output/matched_cases_6_pneumonia.csv
        table41: output/matched_matches_6_pneumonia.csv
        table42: output/matched_combined_6_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_6_uti.txt
        report9: output/matching_report_6_lrti.txt
        report10: output/matching_report_6_urti.txt
        report11: output/matching_report_6_sinusitis.txt
        report12: output/matching_report_6_ot_externa.txt
        report13: output/matching_report_6_ot_media.txt
        report14: output/matching_report_6_pneumonia.txt

  matching_7:
    run: python:latest python analysis/matching_7.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_7_uti.csv
        table23: output/matched_matches_7_uti.csv
        table24: output/matched_combined_7_uti.csv
        table25: output/matched_cases_7_lrti.csv
        table26: output/matched_matches_7_lrti.csv
        table27: output/matched_combined_7_lrti.csv
        table28: output/matched_cases_7_urti.csv
        table29: output/matched_matches_7_urti.csv
        table30: output/matched_combined_7_urti.csv
        table31: output/matched_cases_7_sinusitis.csv
        table32: output/matched_matches_7_sinusitis.csv
        table33: output/matched_combined_7_sinusitis.csv
        table34: output/matched_cases_7_ot_externa.csv
        table35: output/matched_matches_7_ot_externa.csv
        table36: output/matched_combined_7_ot_externa.csv
        table37: output/matched_cases_7_ot_media.csv
        table38: output/matched_matches_7_ot_media.csv
        table39: output/matched_combined_7_ot_media.csv
        table40: output/matched_cases_7_pneumonia.csv
        table41: output/matched_matches_7_pneumonia.csv
        table42: output/matched_combined_7_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_7_uti.txt
        report9: output/matching_report_7_lrti.txt
        report10: output/matching_report_7_urti.txt
        report11: output/matching_report_7_sinusitis.txt
        report12: output/matching_report_7_ot_externa.txt
        report13: output/matching_report_7_ot_media.txt
        report14: output/matching_report_7_pneumonia.txt

  matching_8:
    run: python:latest python analysis/matching_8.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_8_uti.csv
        table23: output/matched_matches_8_uti.csv
        table24: output/matched_combined_8_uti.csv
        table25: output/matched_cases_8_lrti.csv
        table26: output/matched_matches_8_lrti.csv
        table27: output/matched_combined_8_lrti.csv
        table28: output/matched_cases_8_urti.csv
        table29: output/matched_matches_8_urti.csv
        table30: output/matched_combined_8_urti.csv
        table31: output/matched_cases_8_sinusitis.csv
        table32: output/matched_matches_8_sinusitis.csv
        table33: output/matched_combined_8_sinusitis.csv
        table34: output/matched_cases_8_ot_externa.csv
        table35: output/matched_matches_8_ot_externa.csv
        table36: output/matched_combined_8_ot_externa.csv
        table37: output/matched_cases_8_ot_media.csv
        table38: output/matched_matches_8_ot_media.csv
        table39: output/matched_combined_8_ot_media.csv
        table40: output/matched_cases_8_pneumonia.csv
        table41: output/matched_matches_8_pneumonia.csv
        table42: output/matched_combined_8_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_8_uti.txt
        report9: output/matching_report_8_lrti.txt
        report10: output/matching_report_8_urti.txt
        report11: output/matching_report_8_sinusitis.txt
        report12: output/matching_report_8_ot_externa.txt
        report13: output/matching_report_8_ot_media.txt
        report14: output/matching_report_8_pneumonia.txt

  matching_9:
    run: python:latest python analysis/matching_9.py
    needs: [process_1]
    outputs:
      highly_sensitive: 
        table22: output/matched_cases_9_uti.csv
        table23: output/matched_matches_9_uti.csv
        table24: output/matched_combined_9_uti.csv
        table25: output/matched_cases_9_lrti.csv
        table26: output/matched_matches_9_lrti.csv
        table27: output/matched_combined_9_lrti.csv
        table28: output/matched_cases_9_urti.csv
        table29: output/matched_matches_9_urti.csv
        table30: output/matched_combined_9_urti.csv
        table31: output/matched_cases_9_sinusitis.csv
        table32: output/matched_matches_9_sinusitis.csv
        table33: output/matched_combined_9_sinusitis.csv
        table34: output/matched_cases_9_ot_externa.csv
        table35: output/matched_matches_9_ot_externa.csv
        table36: output/matched_combined_9_ot_externa.csv
        table37: output/matched_cases_9_ot_media.csv
        table38: output/matched_matches_9_ot_media.csv
        table39: output/matched_combined_9_ot_media.csv
        table40: output/matched_cases_9_pneumonia.csv
        table41: output/matched_matches_9_pneumonia.csv
        table42: output/matched_combined_9_pneumonia.csv
      moderately_sensitive: 
        report8: output/matching_report_9_uti.txt
        report9: output/matching_report_9_lrti.txt
        report10: output/matching_report_9_urti.txt
        report11: output/matching_report_9_sinusitis.txt
        report12: output/matching_report_9_ot_externa.txt
        report13: output/matching_report_9_ot_media.txt
        report14: output/matching_report_9_pneumonia.txt

  process_2:  
    run: r:latest analysis/casecontrol/process_2.R
    needs: [matching_1,matching_2,matching_3,matching_4,matching_5,matching_6,matching_7,matching_8,matching_9]
    outputs:
      highly_sensitive:
        table1: output/cases_uti.csv
        table2: output/cases_lrti.csv
        table3: output/cases_urti.csv
        table4: output/cases_sinusitis.csv
        table5: output/cases_ot_externa.csv
        table6: output/cases_ot_media.csv
        table7: output/cases_pneumonia.csv
      moderately_sensitive: 
        table8: output/summary_table.csv

#### Extracting cases variables for each infection type ####
# UTI
  generate_study_population_case_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_uti_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_uti_var_1.csv

  generate_study_population_case_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_uti_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_uti_var_2.csv

  generate_study_population_case_uti_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_uti_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_uti_var_3.csv

  generate_study_population_case_uti_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_uti_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_uti_var_4.csv

  generate_study_population_case_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_uti_var_5
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_uti_var_5.csv
# LRTI
  generate_study_population_case_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_lrti_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_lrti_var_1.csv

  generate_study_population_case_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_lrti_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_lrti_var_2.csv

  generate_study_population_case_lrti_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_lrti_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_lrti_var_3.csv

  generate_study_population_case_lrti_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_lrti_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_lrti_var_4.csv

  generate_study_population_case_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_lrti_var_5
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_lrti_var_5.csv
# URTI
  generate_study_population_case_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_urti_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_urti_var_1.csv

  generate_study_population_case_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_urti_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_urti_var_2.csv

  generate_study_population_case_urti_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_urti_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_urti_var_3.csv

  generate_study_population_case_urti_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_urti_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_urti_var_4.csv

  generate_study_population_case_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_urti_var_5
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_urti_var_5.csv
# Sinusitis
  generate_study_population_case_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_sinusitis_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_sinusitis_var_1.csv

  generate_study_population_case_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_sinusitis_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_sinusitis_var_2.csv

  generate_study_population_case_sinusitis_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_sinusitis_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_sinusitis_var_3.csv

  generate_study_population_case_sinusitis_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_sinusitis_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_sinusitis_var_4.csv
# Otitis Externa
  generate_study_population_case_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_externa_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_externa_var_1.csv

  generate_study_population_case_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_externa_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_externa_var_2.csv

  generate_study_population_case_ot_externa_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_externa_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_externa_var_3.csv

  generate_study_population_case_ot_externa_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_externa_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_externa_var_4.csv
# Otitis Media
  generate_study_population_case_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_media_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_media_var_1.csv

  generate_study_population_case_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_media_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_media_var_2.csv

  generate_study_population_case_ot_media_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_media_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_media_var_3.csv

  generate_study_population_case_ot_media_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_ot_media_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_ot_media_var_4.csv
# Pneumonia
  generate_study_population_case_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_pneumonia_var_1
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_pneumonia_var_1.csv

  generate_study_population_case_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_pneumonia_var_2
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_pneumonia_var_2.csv

  generate_study_population_case_pneumonia_var_3:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_pneumonia_var_3
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_pneumonia_var_3.csv

  generate_study_population_case_pneumonia_var_4:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_case_pneumonia_var_4
    needs: [process_2]
    outputs:
      highly_sensitive:
        cohort: output/input_case_pneumonia_var_4.csv

#### Extracting controls variables  ####
# UTI
  generate_study_population_control_1_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_uti_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_uti_var_1.csv

  generate_study_population_control_1_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_uti_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_uti_var_2.csv

  generate_study_population_control_1_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_uti_var_5
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_uti_var_5.csv

  generate_study_population_control_2_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_uti_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_uti_var_1.csv

  generate_study_population_control_2_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_uti_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_uti_var_2.csv

  generate_study_population_control_2_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_uti_var_5
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_uti_var_5.csv

  generate_study_population_control_3_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_uti_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_uti_var_1.csv

  generate_study_population_control_3_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_uti_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_uti_var_2.csv

  generate_study_population_control_3_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_uti_var_5
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_uti_var_5.csv

  generate_study_population_control_4_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_uti_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_uti_var_1.csv

  generate_study_population_control_4_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_uti_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_uti_var_2.csv

  generate_study_population_control_4_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_uti_var_5
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_uti_var_5.csv

  generate_study_population_control_5_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_uti_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_uti_var_1.csv

  generate_study_population_control_5_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_uti_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_uti_var_2.csv

  generate_study_population_control_5_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_uti_var_5
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_uti_var_5.csv

  generate_study_population_control_6_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_uti_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_uti_var_1.csv

  generate_study_population_control_6_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_uti_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_uti_var_2.csv

  generate_study_population_control_6_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_uti_var_5
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_uti_var_5.csv

  generate_study_population_control_7_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_uti_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_uti_var_1.csv

  generate_study_population_control_7_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_uti_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_uti_var_2.csv

  generate_study_population_control_7_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_uti_var_5
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_uti_var_5.csv

  generate_study_population_control_8_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_uti_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_uti_var_1.csv

  generate_study_population_control_8_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_uti_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_uti_var_2.csv

  generate_study_population_control_8_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_uti_var_5
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_uti_var_5.csv

  generate_study_population_control_9_uti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_uti_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_uti_var_1.csv

  generate_study_population_control_9_uti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_uti_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_uti_var_2.csv

  generate_study_population_control_9_uti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_uti_var_5
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_uti_var_5.csv
# LRTI
  generate_study_population_control_1_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_lrti_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_lrti_var_1.csv

  generate_study_population_control_1_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_lrti_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_lrti_var_2.csv

  generate_study_population_control_1_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_lrti_var_5
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_lrti_var_5.csv

  generate_study_population_control_2_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_lrti_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_lrti_var_1.csv

  generate_study_population_control_2_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_lrti_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_lrti_var_2.csv

  generate_study_population_control_2_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_lrti_var_5
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_lrti_var_5.csv

  generate_study_population_control_3_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_lrti_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_lrti_var_1.csv

  generate_study_population_control_3_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_lrti_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_lrti_var_2.csv

  generate_study_population_control_3_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_lrti_var_5
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_lrti_var_5.csv

  generate_study_population_control_4_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_lrti_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_lrti_var_1.csv

  generate_study_population_control_4_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_lrti_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_lrti_var_2.csv

  generate_study_population_control_4_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_lrti_var_5
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_lrti_var_5.csv

  generate_study_population_control_5_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_lrti_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_lrti_var_1.csv

  generate_study_population_control_5_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_lrti_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_lrti_var_2.csv

  generate_study_population_control_5_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_lrti_var_5
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_lrti_var_5.csv

  generate_study_population_control_6_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_lrti_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_lrti_var_1.csv

  generate_study_population_control_6_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_lrti_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_lrti_var_2.csv

  generate_study_population_control_6_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_lrti_var_5
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_lrti_var_5.csv

  generate_study_population_control_7_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_lrti_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_lrti_var_1.csv

  generate_study_population_control_7_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_lrti_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_lrti_var_2.csv

  generate_study_population_control_7_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_lrti_var_5
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_lrti_var_5.csv

  generate_study_population_control_8_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_lrti_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_lrti_var_1.csv

  generate_study_population_control_8_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_lrti_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_lrti_var_2.csv

  generate_study_population_control_8_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_lrti_var_5
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_lrti_var_5.csv

  generate_study_population_control_9_lrti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_lrti_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_lrti_var_1.csv

  generate_study_population_control_9_lrti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_lrti_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_lrti_var_2.csv

  generate_study_population_control_9_lrti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_lrti_var_5
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_lrti_var_5.csv
# URTI
  generate_study_population_control_1_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_urti_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_urti_var_1.csv

  generate_study_population_control_1_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_urti_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_urti_var_2.csv

  generate_study_population_control_1_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_urti_var_5
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_urti_var_5.csv

  generate_study_population_control_2_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_urti_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_urti_var_1.csv

  generate_study_population_control_2_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_urti_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_urti_var_2.csv

  generate_study_population_control_2_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_urti_var_5
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_urti_var_5.csv

  generate_study_population_control_3_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_urti_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_urti_var_1.csv

  generate_study_population_control_3_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_urti_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_urti_var_2.csv

  generate_study_population_control_3_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_urti_var_5
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_urti_var_5.csv

  generate_study_population_control_4_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_urti_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_urti_var_1.csv

  generate_study_population_control_4_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_urti_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_urti_var_2.csv

  generate_study_population_control_4_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_urti_var_5
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_urti_var_5.csv

  generate_study_population_control_5_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_urti_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_urti_var_1.csv

  generate_study_population_control_5_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_urti_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_urti_var_2.csv

  generate_study_population_control_5_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_urti_var_5
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_urti_var_5.csv

  generate_study_population_control_6_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_urti_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_urti_var_1.csv

  generate_study_population_control_6_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_urti_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_urti_var_2.csv

  generate_study_population_control_6_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_urti_var_5
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_urti_var_5.csv

  generate_study_population_control_7_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_urti_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_urti_var_1.csv

  generate_study_population_control_7_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_urti_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_urti_var_2.csv

  generate_study_population_control_7_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_urti_var_5
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_urti_var_5.csv

  generate_study_population_control_8_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_urti_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_urti_var_1.csv

  generate_study_population_control_8_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_urti_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_urti_var_2.csv

  generate_study_population_control_8_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_urti_var_5
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_urti_var_5.csv

  generate_study_population_control_9_urti_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_urti_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_urti_var_1.csv

  generate_study_population_control_9_urti_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_urti_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_urti_var_2.csv

  generate_study_population_control_9_urti_var_5:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_urti_var_5
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_urti_var_5.csv
# Sinusitis
  generate_study_population_control_1_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_sinusitis_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_sinusitis_var_1.csv

  generate_study_population_control_1_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_sinusitis_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_sinusitis_var_2.csv

  generate_study_population_control_2_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_sinusitis_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_sinusitis_var_1.csv

  generate_study_population_control_2_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_sinusitis_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_sinusitis_var_2.csv

  generate_study_population_control_3_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_sinusitis_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_sinusitis_var_1.csv

  generate_study_population_control_3_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_sinusitis_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_sinusitis_var_2.csv

  generate_study_population_control_4_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_sinusitis_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_sinusitis_var_1.csv

  generate_study_population_control_4_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_sinusitis_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_sinusitis_var_2.csv

  generate_study_population_control_5_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_sinusitis_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_sinusitis_var_1.csv

  generate_study_population_control_5_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_sinusitis_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_sinusitis_var_2.csv

  generate_study_population_control_6_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_sinusitis_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_sinusitis_var_1.csv

  generate_study_population_control_6_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_sinusitis_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_sinusitis_var_2.csv

  generate_study_population_control_7_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_sinusitis_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_sinusitis_var_1.csv

  generate_study_population_control_7_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_sinusitis_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_sinusitis_var_2.csv

  generate_study_population_control_8_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_sinusitis_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_sinusitis_var_1.csv

  generate_study_population_control_8_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_sinusitis_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_sinusitis_var_2.csv

  generate_study_population_control_9_sinusitis_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_sinusitis_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_sinusitis_var_1.csv

  generate_study_population_control_9_sinusitis_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_sinusitis_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_sinusitis_var_2.csv
# Otitis Externa
  generate_study_population_control_1_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_ot_externa_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_ot_externa_var_1.csv

  generate_study_population_control_1_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_ot_externa_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_ot_externa_var_2.csv

  generate_study_population_control_2_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_ot_externa_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_ot_externa_var_1.csv

  generate_study_population_control_2_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_ot_externa_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_ot_externa_var_2.csv

  generate_study_population_control_3_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_ot_externa_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_ot_externa_var_1.csv

  generate_study_population_control_3_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_ot_externa_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_ot_externa_var_2.csv

  generate_study_population_control_4_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_ot_externa_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_ot_externa_var_1.csv

  generate_study_population_control_4_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_ot_externa_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_ot_externa_var_2.csv

  generate_study_population_control_5_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_ot_externa_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_ot_externa_var_1.csv

  generate_study_population_control_5_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_ot_externa_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_ot_externa_var_2.csv

  generate_study_population_control_6_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_ot_externa_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_ot_externa_var_1.csv

  generate_study_population_control_6_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_ot_externa_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_ot_externa_var_2.csv

  generate_study_population_control_7_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_ot_externa_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_ot_externa_var_1.csv

  generate_study_population_control_7_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_ot_externa_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_ot_externa_var_2.csv

  generate_study_population_control_8_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_ot_externa_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_ot_externa_var_1.csv

  generate_study_population_control_8_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_ot_externa_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_ot_externa_var_2.csv

  generate_study_population_control_9_ot_externa_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_ot_externa_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_ot_externa_var_1.csv

  generate_study_population_control_9_ot_externa_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_ot_externa_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_ot_externa_var_2.csv
# Otitis Media
  generate_study_population_control_1_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_ot_media_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_ot_media_var_1.csv

  generate_study_population_control_1_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_ot_media_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_ot_media_var_2.csv

  generate_study_population_control_2_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_ot_media_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_ot_media_var_1.csv

  generate_study_population_control_2_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_ot_media_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_ot_media_var_2.csv

  generate_study_population_control_3_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_ot_media_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_ot_media_var_1.csv

  generate_study_population_control_3_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_ot_media_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_ot_media_var_2.csv

  generate_study_population_control_4_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_ot_media_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_ot_media_var_1.csv

  generate_study_population_control_4_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_ot_media_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_ot_media_var_2.csv

  generate_study_population_control_5_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_ot_media_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_ot_media_var_1.csv

  generate_study_population_control_5_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_ot_media_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_ot_media_var_2.csv

  generate_study_population_control_6_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_ot_media_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_ot_media_var_1.csv

  generate_study_population_control_6_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_ot_media_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_ot_media_var_2.csv

  generate_study_population_control_7_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_ot_media_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_ot_media_var_1.csv

  generate_study_population_control_7_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_ot_media_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_ot_media_var_2.csv

  generate_study_population_control_8_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_ot_media_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_ot_media_var_1.csv

  generate_study_population_control_8_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_ot_media_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_ot_media_var_2.csv

  generate_study_population_control_9_ot_media_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_ot_media_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_ot_media_var_1.csv

  generate_study_population_control_9_ot_media_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_ot_media_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_ot_media_var_2.csv
  # Pneumonia
  generate_study_population_control_1_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_pneumonia_var_1
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_pneumonia_var_1.csv

  generate_study_population_control_1_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_1_pneumonia_var_2
    needs: [matching_1]
    outputs:
      highly_sensitive:
        cohort: output/input_control_1_pneumonia_var_2.csv

  generate_study_population_control_2_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_pneumonia_var_1
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_pneumonia_var_1.csv

  generate_study_population_control_2_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_2_pneumonia_var_2
    needs: [matching_2]
    outputs:
      highly_sensitive:
        cohort: output/input_control_2_pneumonia_var_2.csv

  generate_study_population_control_3_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_pneumonia_var_1
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_pneumonia_var_1.csv

  generate_study_population_control_3_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_3_pneumonia_var_2
    needs: [matching_3]
    outputs:
      highly_sensitive:
        cohort: output/input_control_3_pneumonia_var_2.csv

  generate_study_population_control_4_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_pneumonia_var_1
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_pneumonia_var_1.csv

  generate_study_population_control_4_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_4_pneumonia_var_2
    needs: [matching_4]
    outputs:
      highly_sensitive:
        cohort: output/input_control_4_pneumonia_var_2.csv

  generate_study_population_control_5_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_pneumonia_var_1
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_pneumonia_var_1.csv

  generate_study_population_control_5_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_5_pneumonia_var_2
    needs: [matching_5]
    outputs:
      highly_sensitive:
        cohort: output/input_control_5_pneumonia_var_2.csv

  generate_study_population_control_6_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_pneumonia_var_1
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_pneumonia_var_1.csv

  generate_study_population_control_6_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_6_pneumonia_var_2
    needs: [matching_6]
    outputs:
      highly_sensitive:
        cohort: output/input_control_6_pneumonia_var_2.csv

  generate_study_population_control_7_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_pneumonia_var_1
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_pneumonia_var_1.csv

  generate_study_population_control_7_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_7_pneumonia_var_2
    needs: [matching_7]
    outputs:
      highly_sensitive:
        cohort: output/input_control_7_pneumonia_var_2.csv

  generate_study_population_control_8_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_pneumonia_var_1
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_pneumonia_var_1.csv

  generate_study_population_control_8_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_8_pneumonia_var_2
    needs: [matching_8]
    outputs:
      highly_sensitive:
        cohort: output/input_control_8_pneumonia_var_2.csv

  generate_study_population_control_9_pneumonia_var_1:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_pneumonia_var_1
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_pneumonia_var_1.csv

  generate_study_population_control_9_pneumonia_var_2:
    run: cohortextractor:latest generate_cohort --study-definition study_definition_control_9_pneumonia_var_2
    needs: [matching_9]
    outputs:
      highly_sensitive:
        cohort: output/input_control_9_pneumonia_var_2.csv

  case_var_1_process:
    run: r:latest analysis/case_var_1_process.R
    needs: [generate_study_population_case_uti_var_1,generate_study_population_case_lrti_var_1,
    generate_study_population_case_urti_var_1,generate_study_population_case_sinusitis_var_1,
    generate_study_population_case_ot_externa_var_1,generate_study_population_case_ot_media_var_1,
    generate_study_population_case_pneumonia_var_1]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_case_uti_var_1.rds
        rds2: output/processed/input_case_lrti_var_1.rds        
        rds3: output/processed/input_case_urti_var_1.rds
        rds4: output/processed/input_case_sinusitis_var_1.rds
        rds5: output/processed/input_case_ot_externa_var_1.rds
        rds6: output/processed/input_case_ot_media_var_1.rds
        rds7: output/processed/input_case_pneumonia_var_1.rds

  case_var_2_process:
    run: r:latest analysis/case_var_2_process.R
    needs: [generate_study_population_case_uti_var_2,generate_study_population_case_lrti_var_2,
    generate_study_population_case_urti_var_2,generate_study_population_case_sinusitis_var_2,
    generate_study_population_case_ot_externa_var_2,generate_study_population_case_ot_media_var_2,
    generate_study_population_case_pneumonia_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_case_uti_var_2.rds
        rds2: output/processed/input_case_lrti_var_2.rds        
        rds3: output/processed/input_case_urti_var_2.rds
        rds4: output/processed/input_case_sinusitis_var_2.rds
        rds5: output/processed/input_case_ot_externa_var_2.rds
        rds6: output/processed/input_case_ot_media_var_2.rds
        rds7: output/processed/input_case_pneumonia_var_2.rds

  control_var_1_process:
    run: r:latest analysis/control_var_1_process.R
    needs: [generate_study_population_control_1_uti_var_1,generate_study_population_control_2_uti_var_1,generate_study_population_control_3_uti_var_1,
    generate_study_population_control_4_uti_var_1,generate_study_population_control_5_uti_var_1,generate_study_population_control_6_uti_var_1,
    generate_study_population_control_7_uti_var_1,generate_study_population_control_8_uti_var_1,generate_study_population_control_9_uti_var_1,
    generate_study_population_control_1_lrti_var_1,generate_study_population_control_2_lrti_var_1,generate_study_population_control_3_lrti_var_1,
    generate_study_population_control_4_lrti_var_1,generate_study_population_control_5_lrti_var_1,generate_study_population_control_6_lrti_var_1,
    generate_study_population_control_7_lrti_var_1,generate_study_population_control_8_lrti_var_1,generate_study_population_control_9_lrti_var_1,
    generate_study_population_control_1_urti_var_1,generate_study_population_control_2_urti_var_1,generate_study_population_control_3_urti_var_1,
    generate_study_population_control_4_urti_var_1,generate_study_population_control_5_urti_var_1,generate_study_population_control_6_urti_var_1,
    generate_study_population_control_7_urti_var_1,generate_study_population_control_8_urti_var_1,generate_study_population_control_9_urti_var_1,
    generate_study_population_control_1_sinusitis_var_1,generate_study_population_control_2_sinusitis_var_1,generate_study_population_control_3_sinusitis_var_1,
    generate_study_population_control_4_sinusitis_var_1,generate_study_population_control_5_sinusitis_var_1,generate_study_population_control_6_sinusitis_var_1,
    generate_study_population_control_7_sinusitis_var_1,generate_study_population_control_8_sinusitis_var_1,generate_study_population_control_9_sinusitis_var_1,
    generate_study_population_control_1_ot_externa_var_1,generate_study_population_control_2_ot_externa_var_1,generate_study_population_control_3_ot_externa_var_1,
    generate_study_population_control_4_ot_externa_var_1,generate_study_population_control_5_ot_externa_var_1,generate_study_population_control_6_ot_externa_var_1,
    generate_study_population_control_7_ot_externa_var_1,generate_study_population_control_8_ot_externa_var_1,generate_study_population_control_9_ot_externa_var_1,
    generate_study_population_control_1_ot_media_var_1,generate_study_population_control_2_ot_media_var_1,generate_study_population_control_3_ot_media_var_1,
    generate_study_population_control_4_ot_media_var_1,generate_study_population_control_5_ot_media_var_1,generate_study_population_control_6_ot_media_var_1,
    generate_study_population_control_7_ot_media_var_1,generate_study_population_control_8_ot_media_var_1,generate_study_population_control_9_ot_media_var_1,
    generate_study_population_control_1_pneumonia_var_1,generate_study_population_control_2_pneumonia_var_1,generate_study_population_control_3_pneumonia_var_1,
    generate_study_population_control_4_pneumonia_var_1,generate_study_population_control_5_pneumonia_var_1,generate_study_population_control_6_pneumonia_var_1,
    generate_study_population_control_7_pneumonia_var_1,generate_study_population_control_8_pneumonia_var_1,generate_study_population_control_9_pneumonia_var_1]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_uti_var_1.rds
        rds2: output/processed/input_control_lrti_var_1.rds        
        rds3: output/processed/input_control_urti_var_1.rds
        rds4: output/processed/input_control_sinusitis_var_1.rds
        rds5: output/processed/input_control_ot_externa_var_1.rds
        rds6: output/processed/input_control_ot_media_var_1.rds
        rds7: output/processed/input_control_pneumonia_var_1.rds

  control_var_2_process_uti:
    run: r:latest analysis/control_var_2_process_uti.R
    needs: [generate_study_population_control_1_uti_var_2,generate_study_population_control_2_uti_var_2,generate_study_population_control_3_uti_var_2,
    generate_study_population_control_4_uti_var_2,generate_study_population_control_5_uti_var_2,generate_study_population_control_6_uti_var_2,
    generate_study_population_control_7_uti_var_2,generate_study_population_control_8_uti_var_2,generate_study_population_control_9_uti_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_uti_var_2.rds

  control_var_2_process_lrti:
    run: r:latest analysis/control_var_2_process_lrti.R
    needs: [generate_study_population_control_1_lrti_var_2,generate_study_population_control_2_lrti_var_2,generate_study_population_control_3_lrti_var_2,
    generate_study_population_control_4_lrti_var_2,generate_study_population_control_5_lrti_var_2,generate_study_population_control_6_lrti_var_2,
    generate_study_population_control_7_lrti_var_2,generate_study_population_control_8_lrti_var_2,generate_study_population_control_9_lrti_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_lrti_var_2.rds

  control_var_2_process_urti:
    run: r:latest analysis/control_var_2_process_urti.R
    needs: [generate_study_population_control_1_urti_var_2,generate_study_population_control_2_urti_var_2,generate_study_population_control_3_urti_var_2,
    generate_study_population_control_4_urti_var_2,generate_study_population_control_5_urti_var_2,generate_study_population_control_6_urti_var_2,
    generate_study_population_control_7_urti_var_2,generate_study_population_control_8_urti_var_2,generate_study_population_control_9_urti_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_urti_var_2.rds

  control_var_2_process_sinusitis:
    run: r:latest analysis/control_var_2_process_sinusitis.R
    needs: [generate_study_population_control_1_sinusitis_var_2,generate_study_population_control_2_sinusitis_var_2,generate_study_population_control_3_sinusitis_var_2,
    generate_study_population_control_4_sinusitis_var_2,generate_study_population_control_5_sinusitis_var_2,generate_study_population_control_6_sinusitis_var_2,
    generate_study_population_control_7_sinusitis_var_2,generate_study_population_control_8_sinusitis_var_2,generate_study_population_control_9_sinusitis_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_sinusitis_var_2.rds

  control_var_2_process_ot_externa:
    run: r:latest analysis/control_var_2_process_ot_externa.R
    needs: [generate_study_population_control_1_ot_externa_var_2,generate_study_population_control_2_ot_externa_var_2,generate_study_population_control_3_ot_externa_var_2,
    generate_study_population_control_4_ot_externa_var_2,generate_study_population_control_5_ot_externa_var_2,generate_study_population_control_6_ot_externa_var_2,
    generate_study_population_control_7_ot_externa_var_2,generate_study_population_control_8_ot_externa_var_2,generate_study_population_control_9_ot_externa_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_ot_externa_var_2.rds

  control_var_2_process_ot_media:
    run: r:latest analysis/control_var_2_process_ot_media.R
    needs: [generate_study_population_control_1_ot_media_var_2,generate_study_population_control_2_ot_media_var_2,generate_study_population_control_3_ot_media_var_2,
    generate_study_population_control_4_ot_media_var_2,generate_study_population_control_5_ot_media_var_2,generate_study_population_control_6_ot_media_var_2,
    generate_study_population_control_7_ot_media_var_2,generate_study_population_control_8_ot_media_var_2,generate_study_population_control_9_ot_media_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_ot_media_var_2.rds

  control_var_2_process_pneumonia:
    run: r:latest analysis/control_var_2_process_pneumonia.R
    needs: [generate_study_population_control_1_pneumonia_var_2,generate_study_population_control_2_pneumonia_var_2,generate_study_population_control_3_pneumonia_var_2,
    generate_study_population_control_4_pneumonia_var_2,generate_study_population_control_5_pneumonia_var_2,generate_study_population_control_6_pneumonia_var_2,
    generate_study_population_control_7_pneumonia_var_2,generate_study_population_control_8_pneumonia_var_2,generate_study_population_control_9_pneumonia_var_2]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_pneumonia_var_2.rds

  process_3:
    run: r:latest analysis/casecontrol/process_3.R
    needs: [process_2,case_var_1_process,case_var_2_process]
    outputs:
      highly_sensitive: 
        rds1: output/processed/case_uti.rds
        rds2: output/processed/case_lrti.rds        
        rds3: output/processed/case_urti.rds
        rds4: output/processed/case_sinusitis.rds
        rds5: output/processed/case_ot_externa.rds
        rds6: output/processed/case_ot_media.rds
        rds7: output/processed/case_pneumonia.rds

  process_4:  
    run: r:latest analysis/casecontrol/process_4.R
    needs: [matching_1,matching_2,matching_3,matching_4,matching_5,matching_6,matching_7,matching_8,matching_9]
    outputs:
      highly_sensitive:
        table1: output/controls_uti.csv
        table2: output/controls_lrti.csv
        table3: output/controls_urti.csv
        table4: output/controls_sinusitis.csv
        table5: output/controls_ot_externa.csv
        table6: output/controls_ot_media.csv
        table7: output/controls_pneumonia.csv
      moderately_sensitive: 
        table8: output/summary_controls_table.csv

  process_5:
    run: r:latest analysis/casecontrol/process_5.R
    needs: [process_4,control_var_1_process,control_var_2_process_uti,control_var_2_process_lrti,
    control_var_2_process_urti,control_var_2_process_sinusitis,control_var_2_process_ot_externa,
    control_var_2_process_ot_media,control_var_2_process_pneumonia]
    outputs:
      highly_sensitive: 
        rds1: output/processed/control_uti.rds
        rds2: output/processed/control_lrti.rds        
        rds3: output/processed/control_urti.rds
        rds4: output/processed/control_sinusitis.rds
        rds5: output/processed/control_ot_externa.rds
        rds6: output/processed/control_ot_media.rds
        rds7: output/processed/control_pneumonia.rds

  table_1:  
    run: r:latest analysis/casecontrol/table_1.R
    needs: [process_3,process_5]
    outputs:
      moderately_sensitive:
        table1: output/table_1_*_case.csv
        table2: output/table_1_*_control.csv

  process_6_crude_model:  
    run: r:latest analysis/casecontrol/process_6_crude_model.R
    needs: [process_3,process_5]
    outputs:
      moderately_sensitive:
        table1: output/*_combined_model*.csv

  freq_table:  
    run: r:latest analysis/casecontrol/freq_table.R
    needs: [generate_study_population_case_uti_var_3,generate_study_population_case_lrti_var_3,generate_study_population_case_urti_var_3,
    generate_study_population_case_sinusitis_var_3,generate_study_population_case_ot_externa_var_3,generate_study_population_case_ot_media_var_3,
    generate_study_population_case_pneumonia_var_3]
    outputs:
      moderately_sensitive:
        table1: output/freq_*.csv

  freq_icd10type_table:  
    run: r:latest analysis/casecontrol/freq_icd10type_table.R
    needs: [generate_study_population_case_uti_var_4,generate_study_population_case_lrti_var_4,generate_study_population_case_urti_var_4,
    generate_study_population_case_sinusitis_var_4,generate_study_population_case_ot_externa_var_4,generate_study_population_case_ot_media_var_4,
    generate_study_population_case_pneumonia_var_4]
    outputs:
      moderately_sensitive:
        table1: output/freq_icd10type_*.csv

  freq_icd10type_table_bytiming:  
    run: r:latest analysis/casecontrol/freq_icd10type_table_bytiming.R
    needs: [generate_study_population_case_uti_var_5,generate_study_population_case_lrti_var_5,generate_study_population_case_urti_var_5]
    outputs:
      moderately_sensitive:
        table1: output/freq_icd10type_lrti_0-7 days.csv
        table2: output/freq_icd10type_lrti_15-21 days.csv
        table3: output/freq_icd10type_lrti_22-30 days.csv
        table4: output/freq_icd10type_lrti_8-14 days.csv
        table5: output/freq_icd10type_urti_0-7 days.csv
        table6: output/freq_icd10type_urti_15-21 days.csv
        table7: output/freq_icd10type_urti_22-30 days.csv
        table8: output/freq_icd10type_urti_8-14 days.csv
        table9: output/freq_icd10type_uti_0-7 days.csv
        table10: output/freq_icd10type_uti_15-21 days.csv
        table11: output/freq_icd10type_uti_22-30 days.csv
        table12: output/freq_icd10type_uti_8-14 days.csv

  process_8_ab_type_freq:  
    run: r:latest analysis/casecontrol/process_8_ab_type_freq.R
    needs: [generate_study_population_case_uti_var_2,generate_study_population_case_lrti_var_2,
    generate_study_population_case_urti_var_2,generate_study_population_case_sinusitis_var_2,
    generate_study_population_case_ot_externa_var_2,generate_study_population_case_ot_media_var_2,
    generate_study_population_case_pneumonia_var_2]
    outputs:
      moderately_sensitive:
        table1: output/*_abtype_freq.csv

  case_var_5_process:
    run: r:latest analysis/case_var_5_process.R
    needs: [generate_study_population_case_uti_var_5,generate_study_population_case_lrti_var_5,
    generate_study_population_case_urti_var_5]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_case_uti_var_5.rds
        rds2: output/processed/input_case_lrti_var_5.rds        
        rds3: output/processed/input_case_urti_var_5.rds

  control_var_5_process_lrti:
    run: r:latest analysis/control_var_5_process_lrti.R
    needs: [generate_study_population_control_1_lrti_var_5,generate_study_population_control_2_lrti_var_5,generate_study_population_control_3_lrti_var_5,
    generate_study_population_control_4_lrti_var_5,generate_study_population_control_5_lrti_var_5,generate_study_population_control_6_lrti_var_5,
    generate_study_population_control_7_lrti_var_5,generate_study_population_control_8_lrti_var_5,generate_study_population_control_9_lrti_var_5]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_lrti_var_5.rds

  control_var_5_process_urti:
    run: r:latest analysis/control_var_5_process_urti.R
    needs: [generate_study_population_control_1_urti_var_5,generate_study_population_control_2_urti_var_5,generate_study_population_control_3_urti_var_5,
    generate_study_population_control_4_urti_var_5,generate_study_population_control_5_urti_var_5,generate_study_population_control_6_urti_var_5,
    generate_study_population_control_7_urti_var_5,generate_study_population_control_8_urti_var_5,generate_study_population_control_9_urti_var_5]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_urti_var_5.rds

  control_var_5_process_uti:
    run: r:latest analysis/control_var_5_process_uti.R
    needs: [generate_study_population_control_1_uti_var_5,generate_study_population_control_2_uti_var_5,generate_study_population_control_3_uti_var_5,
    generate_study_population_control_4_uti_var_5,generate_study_population_control_5_uti_var_5,generate_study_population_control_6_uti_var_5,
    generate_study_population_control_7_uti_var_5,generate_study_population_control_8_uti_var_5,generate_study_population_control_9_uti_var_5]
    outputs:
      highly_sensitive: 
        rds1: output/processed/input_control_uti_var_5.rds

  process_9:
    run: r:latest analysis/casecontrol/process_9.R
    needs: [process_2,case_var_1_process,case_var_2_process,case_var_5_process]
    outputs:
      highly_sensitive: 
        rds1: output/processed/case_withdate_*.rds
