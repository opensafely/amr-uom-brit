---
title: "covrx check"
output: 
  html_document:
   toc: true
   toc_depth: 2
   toc_float:
     collapsed: false
     smooth_scorll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
knitr::opts_knit$set(root.dir = '/workspace')
```

```{r}
library("tidyverse") 
library('dplyr')#conflict with plyr; load after plyr
library('lubridate')

DF=read.csv(here::here("output","measures"),"input_covrx_2021.csv",na.strings = "")

```

```{r echo=TRUE}

length(unique(as.factor(DF$patient_id)))
sum(is.na(DF$covrx1_dat))
sum(DF$covrx1_dat=="")


sum(is.na(DF$covrx2_dat))
sum(DF$covrx2_dat=="")
```

```{r}
DF$covrx_1=ifelse(!is.na(DF$covrx1_dat),1,0)
DF$covrx_2=ifelse(!is.na(DF$covrx2_dat),1,0)
DF$covrx=ifelse(DF$covrx_1+DF$covrx_2 >0,1,0)
sum(DF$covrx)

```

