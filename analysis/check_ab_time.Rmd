---
title: "variables correlation"
author: "YT Y"
date: "07/04/2022"
output: 
  html_document:
   toc: true
   toc_depth: 2
   toc_float:
     collapsed: false
     smooth_scorll: false
---

```{r setup, include=FALSE}
library('tidyverse')
library("ggplot2")
library(knitr)
library(dplyr)
library(GGally)
knitr::opts_chunk$set(echo = TRUE)
options(knitr.table.format="html")
```


```{r}
setwd(here::here("output"))
#setwd('/Users/yayang/Documents/GitHub/amr-uom-brit/output')
df=read_rds("matched_ab.rds")
# filter only 1 ID
#df=df %>% distinct(patient_id, .keep_all=T)

df=df%>% select( "patient_id" , "patient_index_date","case","subclass",
                 "AB_1_type","AB_6wk_type" , "ab_6w_binary" ,
             "AB_6wk" ,"total_ab", "ab_prescriptions","ab_types",
              "prescribe_times","exposure_period"  ,
               "recent_ab_days",  
              "broad_prop" ,"broad_ab_prescriptions",
             "interval_med" ,  "interval_mean" , "interval_sd" , "interval_CV",
              "length_med" , "length_mean", "length_sd" ,  "length_CV" 
               )

df$exposure_period=-(df$exposure_period)
df$recent_ab_days=as.numeric(df$recent_ab_days)
```


```{r}
var= df[,8:24]
cov(var)

```

