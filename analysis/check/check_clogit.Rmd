---
title: "Random Forest"
---

```{r setup, include=FALSE}
library("caret")
library("survival")
library('tidyverse')
library(pROC) #plyr
library(randomForest) #dplyr
```

# continuous var
# import dataset
```{r }
#train_X <- read_rds("/Users/yayang/Documents/GitHub/amr-uom-brit/output/train_X.rds")
df<- read_rds(here::here("output","train.rds"))
df$case=as.numeric(df$case)


col=c("case","total_ab","ab_types","exposure_period" ,"recent_ab_days","broad_ab_prescriptions" ,"interval_mean" , "interval_sd","subclass")

df=df[,col]

```



# total_ab
```{r}
summary(clogit(case ~ total_ab + strata(subclass),df))
```

# ab_types
```{r}
summary(clogit(case ~ ab_types + strata(subclass),df))
```

# exposure_period
```{r}
summary(clogit(case ~ exposure_period + strata(subclass),df))
```

# recent_ab_days
```{r}
summary(clogit(case ~ recent_ab_days + strata(subclass),df))
```

# broad_ab_prescriptions
```{r}
summary(clogit(case ~ broad_ab_prescriptions + strata(subclass),df))
```

# interval_mean
```{r}
summary(clogit(case ~ interval_mean + strata(subclass),df))
```

# interval_sd
```{r}
summary(clogit(case ~ interval_sd + strata(subclass),df))
```


# category var

# import dataset
```{r }
#train_X <- read_rds("/Users/yayang/Documents/GitHub/amr-uom-brit/output/train_X.rds")
df<- read_rds(here::here("output","train_cat.rds"))
train$case=as.numeric(train$case)


col=c("case","total_ab_group","ab_types_group","exposure_period_group" ,"recent_ab_days_group","broad_ab_prescriptions_group" ,"interval_mean_group" , "interval_sd_group","subclass")

df=df[,col]

```



# total_ab
```{r}
summary(clogit(case ~ total_ab_group + strata(subclass),df))
```

# ab_types
```{r}
summary(clogit(case ~ ab_types_group + strata(subclass),df))
```

# exposure_period
```{r}
summary(clogit(case ~ exposure_period_group + strata(subclass),df))
```

# recent_ab_days
```{r}
summary(clogit(case ~ recent_ab_days_group + strata(subclass),df))
```

# broad_ab_prescriptions
```{r}
summary(clogit(case ~ broad_ab_prescriptions_group + strata(subclass),df))
```

# interval_mean
```{r}
summary(clogit(case ~ interval_mean_group + strata(subclass),df))
```

# interval_sd
```{r}
summary(clogit(case ~ interval_sd_group + strata(subclass),df))
```

